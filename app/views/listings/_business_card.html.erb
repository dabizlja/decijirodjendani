<div class="group bg-white rounded-2xl shadow-lg hover:shadow-xl transition-all duration-300 overflow-hidden border border-gray-100 flex flex-col h-full">
  <!-- Business Image -->
  <div class="h-48 bg-gradient-to-br from-purple-100 to-pink-100 relative overflow-hidden">
    <% if business.main_image %>
      <%= image_tag business.main_image,
          alt: business.display_name,
          class: "w-full h-full object-cover group-hover:scale-105 transition-transform duration-300" %>
    <% else %>
      <div class="w-full h-full flex items-center justify-center text-6xl">
        <%= business.category.icon %>
      </div>
    <% end %>

    <!-- Category Badge -->
    <div class="absolute top-3 left-3 px-2 py-1 bg-white/90 backdrop-blur rounded-full text-xs font-medium flex items-center gap-1">
      <%= business.category.icon %> <%= business.category.name %>
    </div>
  </div>

  <!-- Business Info -->
  <div class="p-6 flex flex-col flex-1">
    <div class="mb-3">
      <h3 class="text-lg font-bold text-gray-900 mb-1 group-hover:text-purple-600 transition-colors">
        <%= business.display_name %>
      </h3>
      <p class="text-sm text-gray-600 flex items-center gap-1">
        üìç <%= business.city.name %>
        <% if business.address.present? %>
          ‚Ä¢ <%= truncate(business.address, length: 30) %>
        <% end %>
      </p>
    </div>

    <!-- Tags -->
    <% if business.tags.any? %>
      <div class="flex flex-wrap gap-1 mb-3">
        <% business.tags.limit(3).each do |tag| %>
          <span class="inline-flex items-center gap-1 px-2 py-1 bg-gray-100 text-gray-700 rounded-full text-xs">
            <%= tag.icon %> <%= tag.name %>
          </span>
        <% end %>
        <% if business.tags.count > 3 %>
          <span class="px-2 py-1 bg-gray-100 text-gray-500 rounded-full text-xs">
            +<%= business.tags.count - 3 %> jo≈°
          </span>
        <% end %>
      </div>
    <% end %>

    <!-- Description -->
    <div class="flex-1 mb-4">
      <% if business.description.present? %>
        <p class="text-sm text-gray-600 line-clamp-2">
          <%= truncate(business.description, length: 100) %>
        </p>
      <% end %>
    </div>

    <% if business.min_price.present? %>
      <div class="mb-4 flex items-center justify-between">
        <div>
          <p class="text-xs text-gray-500 uppercase tracking-wide">Cene od</p>
          <p class="text-lg font-semibold text-purple-700">
            <%= format_price_with_currency(business.min_price, business.price_currency) %>
          </p>
        </div>
        <% if business.has_active_discount? %>
          <span class="text-xs font-semibold text-green-700 bg-green-50 border border-green-100 rounded-full px-3 py-1">
            U toku je popust
          </span>
        <% end %>
      </div>
    <% end %>

    <!-- Action Button -->
    <%= link_to venue_path(business),
        class: "block w-full text-center px-4 py-3 bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-xl font-medium shadow hover:brightness-110 transition" do %>
      üëÅÔ∏è Pogledaj detalje
    <% end %>
  </div>
</div>